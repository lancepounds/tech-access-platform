
{% extends "base.html" %}

{% block title %}Company Registration - Tech Access{% endblock %}

{% block content %}
<div class="row justify-content-center">
  <div class="col-md-8 col-lg-6">
    <div class="card">
      <div class="card-header text-center">
        <h4 class="mb-0"><i class="bi bi-building me-2"></i>Register Your Company</h4>
        <p class="mb-0 mt-2 text-light">Join our platform to showcase your accessible products and services</p>
      </div>
      <div class="card-body">
        <form method="POST" action="{{ url_for('companies.register_company') }}" novalidate>
          {{ form.hidden_tag() }} {# CSRF token and other hidden fields #}

          <div class="row">
            <div class="col-md-6 mb-3">
              {{ form.company_name.label(class="form-label") }} {{ form.company_name(class="form-control" + (" is-invalid" if form.company_name.errors else "")) }}
              {% if form.company_name.errors %}
                <div class="invalid-feedback d-block">{% for error in form.company_name.errors %}<span>{{ error }}</span>{% endfor %}</div>
              {% endif %}
            </div>
            <div class="col-md-6 mb-3">
              {{ form.contact_email.label(class="form-label") }} {{ form.contact_email(class="form-control" + (" is-invalid" if form.contact_email.errors else "")) }}
              {% if form.contact_email.errors %}
                <div class="invalid-feedback d-block">{% for error in form.contact_email.errors %}<span>{{ error }}</span>{% endfor %}</div>
              {% endif %}
            </div>
          </div>

          <div class="row">
            <div class="col-md-6 mb-3">
              {{ form.contact_name.label(class="form-label") }} {{ form.contact_name(class="form-control" + (" is-invalid" if form.contact_name.errors else "")) }}
              {% if form.contact_name.errors %}
                <div class="invalid-feedback d-block">{% for error in form.contact_name.errors %}<span>{{ error }}</span>{% endfor %}</div>
              {% endif %}
            </div>
            <div class="col-md-6 mb-3">
              {{ form.contact_title.label(class="form-label") }} {{ form.contact_title(class="form-control" + (" is-invalid" if form.contact_title.errors else ""), placeholder="e.g. Product Manager, UX Designer") }}
              {% if form.contact_title.errors %}
                <div class="invalid-feedback d-block">{% for error in form.contact_title.errors %}<span>{{ error }}</span>{% endfor %}</div>
              {% endif %}
            </div>
          </div>

          <div class="row">
            <div class="col-md-6 mb-3">
              {{ form.phone.label(class="form-label") }} {{ form.phone(class="form-control" + (" is-invalid" if form.phone.errors else "")) }}
              {% if form.phone.errors %}
                <div class="invalid-feedback d-block">{% for error in form.phone.errors %}<span>{{ error }}</span>{% endfor %}</div>
              {% endif %}
            </div>
            <div class="col-md-6 mb-3">
              {{ form.website.label(class="form-label") }} {{ form.website(class="form-control" + (" is-invalid" if form.website.errors else ""), placeholder="https://yourcompany.com") }}
              {% if form.website.errors %}
                <div class="invalid-feedback d-block">{% for error in form.website.errors %}<span>{{ error }}</span>{% endfor %}</div>
              {% endif %}
            </div>
          </div>

          <div class="mb-3">
            {{ form.address.label(class="form-label") }} {{ form.address(class="form-control" + (" is-invalid" if form.address.errors else ""), rows="2") }}
            {% if form.address.errors %}
              <div class="invalid-feedback d-block">{% for error in form.address.errors %}<span>{{ error }}</span>{% endfor %}</div>
            {% endif %}
          </div>

          <div class="mb-3">
            {{ form.company_description.label(class="form-label") }}
            {{ form.company_description(class="form-control" + (" is-invalid" if form.company_description.errors else ""), rows="4", placeholder="Tell us about your company and mission...") }}
            {% if form.company_description.errors %}
              <div class="invalid-feedback d-block">{% for error in form.company_description.errors %}<span>{{ error }}</span>{% endfor %}</div>
            {% endif %}
          </div>

          <div class="mb-3">
            {{ form.industry.label(class="form-label") }}
            {{ form.industry(class="form-control" + (" is-invalid" if form.industry.errors else "")) }}
            {% if form.industry.errors %}
                <div class="invalid-feedback d-block">{% for error in form.industry.errors %}<span>{{ error }}</span>{% endfor %}</div>
            {% endif %}
          </div>

          <div class="mb-3">
            {{ form.company_size.label(class="form-label") }}
            {{ form.company_size(class="form-control" + (" is-invalid" if form.company_size.errors else "")) }}
            {% if form.company_size.errors %}
                <div class="invalid-feedback d-block">{% for error in form.company_size.errors %}<span>{{ error }}</span>{% endfor %}</div>
            {% endif %}
          </div>

          <div class="mb-3">
            {{ form.products_services.label(class="form-label") }}
            {{ form.products_services(class="form-control" + (" is-invalid" if form.products_services.errors else ""), rows="4", placeholder="Describe the products and services you want to test for accessibility...") }}
            {% if form.products_services.errors %}
              <div class="invalid-feedback d-block">{% for error in form.products_services.errors %}<span>{{ error }}</span>{% endfor %}</div>
            {% endif %}
          </div>

          <div class="mb-3">
            {{ form.accessibility_goals.label(class="form-label") }}
            {{ form.accessibility_goals(class="form-control" + (" is-invalid" if form.accessibility_goals.errors else ""), rows="3", placeholder="What are your accessibility goals and how can our community help?") }}
            {% if form.accessibility_goals.errors %}
              <div class="invalid-feedback d-block">{% for error in form.accessibility_goals.errors %}<span>{{ error }}</span>{% endfor %}</div>
            {% endif %}
          </div>

          <div class="row">
            <div class="col-md-6 mb-3">
              {{ form.accessibility_experience.label(class="form-label") }}
              {{ form.accessibility_experience(class="form-control" + (" is-invalid" if form.accessibility_experience.errors else "")) }}
              {% if form.accessibility_experience.errors %}
                <div class="invalid-feedback d-block">{% for error in form.accessibility_experience.errors %}<span>{{ error }}</span>{% endfor %}</div>
              {% endif %}
            </div>
            <div class="col-md-6 mb-3">
              {{ form.compliance_requirements.label(class="form-label") }}
              {{ form.compliance_requirements(class="form-control" + (" is-invalid" if form.compliance_requirements.errors else "")) }}
              {% if form.compliance_requirements.errors %}
                <div class="invalid-feedback d-block">{% for error in form.compliance_requirements.errors %}<span>{{ error }}</span>{% endfor %}</div>
              {% endif %}
            </div>
          </div>

          <div class="row">
            <div class="col-md-6 mb-3">
              {{ form.testing_timeline.label(class="form-label") }}
              {{ form.testing_timeline(class="form-control" + (" is-invalid" if form.testing_timeline.errors else "")) }}
              {% if form.testing_timeline.errors %}
                <div class="invalid-feedback d-block">{% for error in form.testing_timeline.errors %}<span>{{ error }}</span>{% endfor %}</div>
              {% endif %}
            </div>
            <div class="col-md-6 mb-3">
              {{ form.testing_budget.label(class="form-label") }}
              {{ form.testing_budget(class="form-control" + (" is-invalid" if form.testing_budget.errors else "")) }}
              {% if form.testing_budget.errors %}
                <div class="invalid-feedback d-block">{% for error in form.testing_budget.errors %}<span>{{ error }}</span>{% endfor %}</div>
              {% endif %}
            </div>
          </div>

          <div class="mb-3">
            {{ form.interests.label(class="form-label") }}
            {{ form.interests(class="form-select" + (" is-invalid" if form.interests.errors else ""), multiple="multiple") }} {# Use form-select for better styling of multiple #}
            {% if form.interests.errors %}
                <div class="invalid-feedback d-block">{% for error in form.interests.errors %}<span>{{ error }}</span>{% endfor %}</div>
            {% endif %}
          </div>

          <div class="mb-3">
            {{ form.password.label(class="form-label") }} {{ form.password(class="form-control" + (" is-invalid" if form.password.errors else "")) }}
            {% if form.password.errors %}
              <div class="invalid-feedback d-block">{% for error in form.password.errors %}<span>{{ error }}</span>{% endfor %}</div>
            {% endif %}
          </div>

          <div class="mb-3">
            {{ form.confirm_password.label(class="form-label") }} {{ form.confirm_password(class="form-control" + (" is-invalid" if form.confirm_password.errors else "")) }}
            {% if form.confirm_password.errors %}
              <div class="invalid-feedback d-block">{% for error in form.confirm_password.errors %}<span>{{ error }}</span>{% endfor %}</div>
            {% endif %}
          </div>

          <div class="mb-3 form-check">
            {{ form.terms_agreement(class="form-check-input" + (" is-invalid" if form.terms_agreement.errors else "")) }}
            {{ form.terms_agreement.label(class="form-check-label") }}
            {% if form.terms_agreement.errors %}
                <div class="invalid-feedback d-block">
                    {% for error in form.terms_agreement.errors %}<span>{{ error }}</span>{% endfor %}
                </div>
            {% endif %}
          </div>

          <div class="d-grid">
            {{ form.submit(class="btn btn-primary") }}
          </div>
        </form>

        <div class="text-center mt-3">
          <p class="mb-0">Already have an account? 
            <a href="{{ url_for('auth.login') }}" class="text-decoration-none">Sign in</a>
          </p>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const form = document.querySelector('form');
    const password = document.getElementById('password');
    const confirmPassword = document.getElementById('confirm_password');

    form.addEventListener('submit', function(e) {
        if (password.value !== confirmPassword.value) {
            e.preventDefault();
            alert('Passwords do not match!');
            confirmPassword.focus();
        }
    });

    confirmPassword.addEventListener('input', function() {
        if (password.value !== confirmPassword.value) {
            confirmPassword.setCustomValidity('Passwords do not match');
        } else {
            confirmPassword.setCustomValidity('');
        }
    });
});
</script>
{% endblock %}
